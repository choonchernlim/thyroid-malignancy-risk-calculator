<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
    <!-- TODO title -->
    <title>Test</title>

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- TODO favicon -->
    <!--<link rel="shortcut icon" href="/goodies/img/favicon/1.0.0/favicon.ico">-->
    <!--<link rel="icon" href="/goodies/img/favicon/1.0.0/favicon.ico" type="image/x-icon">-->

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <!--[if lt IE 9]>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>


</head>
<body>

<div class="container">
    <div class="page-header">
        <h1>Test</h1>
    </div>

    <div class="row lead text-center">
        <div class="col-xs-2">
            <div class="col-xs-12">
                <button class="prevResultValueBtn btn btn-lg btn-primary"><i class="fa fa-2x fa-arrow-circle-left"></i>
                </button>
            </div>
        </div>
        <div class="col-xs-8">
            <div class="resultValue col-xs-2 alert">A</div>
            <div class="resultValue col-xs-2 alert">B</div>
            <div class="resultValue col-xs-2 alert">C</div>
            <div class="resultValue col-xs-2 alert">D</div>
            <div class="resultValue col-xs-2 alert">E</div>
            <div class="resultValue col-xs-2 alert">F</div>
        </div>
        <div class="col-xs-2">
            <div class="col-xs-12">
                <button class="nextResultValueBtn btn btn-lg btn-primary"><i class="fa fa-2x fa-arrow-circle-right"></i>
                </button>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

<script type="text/javascript" src="js/calculator.js"></script>

<script>
    console.log( JSON.stringify( calculator.computeAll( 0.05 ), null, 4 ) );

    var highlightCSS = 'alert-info';
    var $resultValue = $( '.resultValue' );
    var resultValues = _.map( $resultValue.toArray(), function ( selectorName ) {
        return $( selectorName ).text();
    } );
    var $prevButton = $( '.prevResultValueBtn' );
    var $nextButton = $( '.nextResultValueBtn' );

    var app = {
        removeSelectedResultValue : function ( index ) {
            $( '.resultValue:contains("' + resultValues[index] + '")' ).removeClass( highlightCSS );
        },

        setSelectedResultValue : function ( index ) {
            $( '.resultValue:contains("' + resultValues[index] + '")' ).addClass( highlightCSS );
        },

        setButtonState : function ( $button, isDisabled ) {
            $button.prop( 'disabled', isDisabled );
        }
    };

    app.setSelectedResultValue( 2 );

    console.log( resultValues );

    $prevButton.click( function () {
        var value = $( '.' + highlightCSS ).text();
        var index = _.indexOf( resultValues, value );

        if ( index > 0 ) {
            app.setButtonState( $nextButton, false );
            app.removeSelectedResultValue( index );
            app.setSelectedResultValue( index - 1 );
        }
        else {
            app.setButtonState( $prevButton, true );
        }
    } );

    $nextButton.click( function () {
        var value = $( '.' + highlightCSS ).text();
        var index = _.indexOf( resultValues, value );

        if ( index < $resultValue.length - 1 ) {
            app.setButtonState( $prevButton, false );
            app.removeSelectedResultValue( index );
            app.setSelectedResultValue( index + 1 );
        }
        else {
            app.setButtonState( $nextButton, true );
        }
    } );

</script>

</body>
</html>
